<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>The Turtle’s Journey</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto+Slab">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Inconsolata">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../_styles/theme.css">
  <link rel="stylesheet" href="../_styles/main.css">

</head>
<body>
<ol class="breadcrumb">
  <li><a href="../">Upsolving</a></li>
</ol>


<div class="container ups-main">
<h1 id="the-turtles-journey">The Turtle’s Journey</h1>
<p><a href="http://redprogramacioncompetitiva.com/forum/viewforum.php?f=757">Foro de discusión</a>.</p>
<h2 id="problema">Problema</h2>
<p>Escribir un pequeño intérprete para un limitado subconjunto del lenguaje <a href="http://en.wikipedia.org/wiki/Logo_(programming_language)">Logo</a>, llamado MicroLogo.</p>
<p>El lenguaje solo cuenta con 4 operaciones, de las cuales la más interesante es <code>repeat</code>, ya que introduce recursión en la gramática. Las otras instrucciones mueven a la tortuga (hacia adelante cierto número de pasos, o girándola hacia la izquierda o la derecha).</p>
<p>Se pide que, a partir de un programa de MicroLogo válido, se reporte el total de pasos que avanza y la cantidad de grados que gira a la derecha e izquierda la tortuga al ejecutarse el programa.</p>
<h2 id="estrategia">Estrategia</h2>
<p>Después de que terminó la maratón, salimos con algunos de los equipos que estaban participando desde la U. Javeriana a comer pizza. Durante la charla tuve una excelente conversación con dos integrantes del único equipo que resolvió este problema en esa sede.</p>
<p>La charla fue algo así (disculpen si me tomo muchas libertades con el parafraseo, mi memoria es horrible):</p>
<p>Yo: Ahh.., ustedes fueron los que resolvieron el de la tortuga.<br />Ellos: Sí.<br />- Qué bueno, ¿cómo lo hicieron?<br />- (sonrisas) Bueno, solamente hicimos funciones para manejar cada instrucción y… (detalles que no recuerdo muy bien)<br />- ¿Entonces escribieron un parser recursivo?<br />- (miradas extrañas) ehh, no, solamente escribimos unas funciones…<br />- ¿No lo hicieron recursivo? ¿Usaron una pila?<br />- No, no, solo escribimos cuatro funciones, una para cada instrucción, y…<br />- Un momento, a ver si entendí.. ¿escribieron cuatro funciones? ¿una para cada instrucción?<br />- Sí.<br />- ¿Y la función para <code>repeat</code> no se llama a sí misma?<br />- No. (una pausa..) Ah, no, sí, cuando encuentra otro <code>repeat</code> por dentro.<br />- (una pausa, en la que tal vez se asustaron de mi cara de felicidad) Felicitaciones. Escribieron un parser recursivo. Ya saben cómo escribir compiladores.</p>
<p>Esta conversación me alegró enormemente. Hasta donde tengo entendido, mis amigos con quienes estaba hablando apenas van en un tercio de su carrera, y no han pasado por cursos de estructuras de datos ni teoría de compiladores. ¡Y escribieron un parser recursivo sin saber ni siquiera el nombre que los “teóricos”<small><i class="fa fa-angle-left"></i> esos barbudos petulantes… <i class="fa fa-angle-right"></i></small> le dan a eso! Qué felicidad me da.</p>
<p>Y hubo más. Luego me contaron de cómo recibieron AC solo después de unos 8 envíos, y solucionar varios bugs en el código. ¿Hay algo más delicioso que recibir un AC después de muchos WA en una competencia?</p>
<p>En fin… Se debe escribir algún tipo de <em>parser</em>, y hay muchas formas de hacerlo. La primera vez que solucioné este problema lo hice utilizando mi plantilla de código para parsers de recursión descendente, pero para cambiar un poco, esta vez intentaré resolverlo sin llamados recursivos y utilizando una pila. Creo que el código resultará mucho más corto así. Vamos a ver.</p>
<p>La idea es simple. Usaremos tuplas del tipo <code>(fw, lt, rt, rep)</code> para llevar la cuenta de pasos que ha avanzado la tortuga, de los grados que ha girado hacia la izquierda o la derecha y, adicionalmente, del número de <em>repeticiones</em>. Cada tupla de éstas describe un <em>contexto</em>, con lo que quiero decir, el nivel de anidamiento en el que nos encontramos. Cada programa arranca en el contexto global, con valores <code>fw: 0, lt: 0, rt: 0, rep: 1</code>, y por cada operación <code>repeat N [ INST ]</code> que encontremos crearemos una nueva tupla con valores <code>fw: 0, lt: 0, rt: 0, rep: N</code>, que pondremos en la pila y se actualizará a medida que se procesen las instrucciones en <code>INST</code>. Cuando el contexto se termine (al haber encontrado el token de cierre <code>]</code>) tomamos el tope de la pila, multiplicamos los valores <code>fw, lt, rt</code> por <code>rep</code>, y sumamos esos números al contexto que queda como nuevo tope de la pila. ¿Tiene sentido lo que digo?</p>
<p>Puede ser que el párrafo anterior sea un poco difícil de entender para alguien que no esté muy familiarizado con el procesamiento de texto—“<em>parseo</em>”, si se quiere<small><i class="fa fa-angle-left"></i> yo quiero, es encantador conjugar el verbo <em>parsear</em>; yo parseo, tu parseas, etc. <i class="fa fa-angle-right"></i></small>. Afortunadamente, problemas como éste son la excusa perfecta para romper el hielo y familiarizarse con este tema.</p>
<h3 id="simulación">Simulación</h3>
<p>La siguiente simulación ilustra el proceso de análisis sintáctico (<em>parsing</em>) de un programa de MicroLogo, mostrando cómo se modifica la pila a medida que se leen los tokens: <a href="sim/" target="sim">Simulación <small><i class="fa fa-external-link"></i></small></a>.</p>
<h2 id="solución">Solución</h2>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">Screencast</h3>
</div>
<div class="panel-body screencast">
<div class="asciinema" data-id="11711">

</div>
<div>

</div>
</div>
</div>
</div>
<div class="ups-footer">
  <p>11 de Septiembre, 2014</p>
  <p><a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a></p>
</div>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="../_scripts/ups.js"></script>




</body>
</html>
